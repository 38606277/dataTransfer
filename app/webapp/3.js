(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{571:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=f(r(1)),l=r(189),s=f(r(597)),u=f(r(598)),o=f(r(599)),i=f(r(600));function f(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.default.Component),a(t,[{key:"render",value:function(){return n.default.createElement(l.Switch,null,n.default.createElement(l.Route,{path:"/user/userList",component:s.default}),n.default.createElement(l.Route,{path:"/user/userInfo/:userId",component:u.default}),n.default.createElement(l.Route,{path:"/user/UpdatePwd/:userId",component:o.default}),n.default.createElement(l.Route,{path:"/user/userView/:userId",component:i.default}),n.default.createElement(l.Redirect,{exact:!0,from:"/user",to:"/user/userList"}))}}]),t}();t.default=d},572:function(e,t,r){var a={"./af":440,"./af.js":440,"./ar":441,"./ar-dz":442,"./ar-dz.js":442,"./ar-kw":443,"./ar-kw.js":443,"./ar-ly":444,"./ar-ly.js":444,"./ar-ma":445,"./ar-ma.js":445,"./ar-sa":446,"./ar-sa.js":446,"./ar-tn":447,"./ar-tn.js":447,"./ar.js":441,"./az":448,"./az.js":448,"./be":449,"./be.js":449,"./bg":450,"./bg.js":450,"./bm":451,"./bm.js":451,"./bn":452,"./bn.js":452,"./bo":453,"./bo.js":453,"./br":454,"./br.js":454,"./bs":455,"./bs.js":455,"./ca":456,"./ca.js":456,"./cs":457,"./cs.js":457,"./cv":458,"./cv.js":458,"./cy":459,"./cy.js":459,"./da":460,"./da.js":460,"./de":461,"./de-at":462,"./de-at.js":462,"./de-ch":463,"./de-ch.js":463,"./de.js":461,"./dv":464,"./dv.js":464,"./el":465,"./el.js":465,"./en-au":466,"./en-au.js":466,"./en-ca":467,"./en-ca.js":467,"./en-gb":468,"./en-gb.js":468,"./en-ie":469,"./en-ie.js":469,"./en-il":470,"./en-il.js":470,"./en-nz":471,"./en-nz.js":471,"./eo":472,"./eo.js":472,"./es":473,"./es-do":474,"./es-do.js":474,"./es-us":475,"./es-us.js":475,"./es.js":473,"./et":476,"./et.js":476,"./eu":477,"./eu.js":477,"./fa":478,"./fa.js":478,"./fi":479,"./fi.js":479,"./fo":480,"./fo.js":480,"./fr":481,"./fr-ca":482,"./fr-ca.js":482,"./fr-ch":483,"./fr-ch.js":483,"./fr.js":481,"./fy":484,"./fy.js":484,"./gd":485,"./gd.js":485,"./gl":486,"./gl.js":486,"./gom-latn":487,"./gom-latn.js":487,"./gu":488,"./gu.js":488,"./he":489,"./he.js":489,"./hi":490,"./hi.js":490,"./hr":491,"./hr.js":491,"./hu":492,"./hu.js":492,"./hy-am":493,"./hy-am.js":493,"./id":494,"./id.js":494,"./is":495,"./is.js":495,"./it":496,"./it.js":496,"./ja":497,"./ja.js":497,"./jv":498,"./jv.js":498,"./ka":499,"./ka.js":499,"./kk":500,"./kk.js":500,"./km":501,"./km.js":501,"./kn":502,"./kn.js":502,"./ko":503,"./ko.js":503,"./ku":504,"./ku.js":504,"./ky":505,"./ky.js":505,"./lb":506,"./lb.js":506,"./lo":507,"./lo.js":507,"./lt":508,"./lt.js":508,"./lv":509,"./lv.js":509,"./me":510,"./me.js":510,"./mi":511,"./mi.js":511,"./mk":512,"./mk.js":512,"./ml":513,"./ml.js":513,"./mn":514,"./mn.js":514,"./mr":515,"./mr.js":515,"./ms":516,"./ms-my":517,"./ms-my.js":517,"./ms.js":516,"./mt":518,"./mt.js":518,"./my":519,"./my.js":519,"./nb":520,"./nb.js":520,"./ne":521,"./ne.js":521,"./nl":522,"./nl-be":523,"./nl-be.js":523,"./nl.js":522,"./nn":524,"./nn.js":524,"./pa-in":525,"./pa-in.js":525,"./pl":526,"./pl.js":526,"./pt":527,"./pt-br":528,"./pt-br.js":528,"./pt.js":527,"./ro":529,"./ro.js":529,"./ru":530,"./ru.js":530,"./sd":531,"./sd.js":531,"./se":532,"./se.js":532,"./si":533,"./si.js":533,"./sk":534,"./sk.js":534,"./sl":535,"./sl.js":535,"./sq":536,"./sq.js":536,"./sr":537,"./sr-cyrl":538,"./sr-cyrl.js":538,"./sr.js":537,"./ss":539,"./ss.js":539,"./sv":540,"./sv.js":540,"./sw":541,"./sw.js":541,"./ta":542,"./ta.js":542,"./te":543,"./te.js":543,"./tet":544,"./tet.js":544,"./tg":545,"./tg.js":545,"./th":546,"./th.js":546,"./tl-ph":547,"./tl-ph.js":547,"./tlh":548,"./tlh.js":548,"./tr":549,"./tr.js":549,"./tzl":550,"./tzl.js":550,"./tzm":551,"./tzm-latn":552,"./tzm-latn.js":552,"./tzm.js":551,"./ug-cn":553,"./ug-cn.js":553,"./uk":554,"./uk.js":554,"./ur":555,"./ur.js":555,"./uz":556,"./uz-latn":557,"./uz-latn.js":557,"./uz.js":556,"./vi":558,"./vi.js":558,"./x-pseudo":559,"./x-pseudo.js":559,"./yo":560,"./yo.js":560,"./zh-cn":561,"./zh-cn.js":561,"./zh-hk":562,"./zh-hk.js":562,"./zh-tw":563,"./zh-tw.js":563};function n(e){var t=l(e);return r(t)}function l(e){var t=a[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return t}n.keys=function(){return Object.keys(a)},n.resolve=l,e.exports=n,n.id=572},591:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();r(435);var n,l=r(188);var s=new((n=l)&&n.__esModule?n:{default:n}).default,u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"get",value:function(){}}],[{key:"getBaseUrl",value:function(){return window.getServerUrl()}},{key:"post",value:function(t,r){if(null==s.getStorage("userInfo")&&"/reportServer/user/encodePwd"!=t&&"/reportServer/user/Reactlogin"!=t||""==s.getStorage("userInfo")&&"/reportServer/user/encodePwd"!=t&&"/reportServer/user/Reactlogin"!=t)return window.location.href="#login",new Promise(function(e,t){});var a=e.getBaseUrl()+t,n={method:"POST",headers:{"Access-Control-Allow-Origin":"*",credentials:JSON.stringify(s.getStorage("userInfo")||"")},body:r};return fetch(a,n).then(function(e){return e.json()}).catch(function(e){return e.json()})}}]),e}();t.default=u},592:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),l=r(591),s=(a=l)&&a.__esModule?a:{default:a};var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"login",value:function(e){return s.default.post("/reportServer/user/Reactlogin",JSON.stringify(e))}},{key:"checkLoginInfo",value:function(e){var t=e.UserCode,r=e.Pwd;return"string"!=typeof t||0===t.length?{status:!1,msg:"用户名不能为空！"}:"string"!=typeof r||0===r.length?{status:!1,msg:"密码不能为空！"}:{status:!0,msg:"验证通过"}}},{key:"encodePwd",value:function(e){return s.default.post("/reportServer/user/encodePwd",e)}},{key:"logout",value:function(){return s.default.post("/user/logout.do",null)}},{key:"getUserList",value:function(e){return s.default.post("/reportServer/formUser/getUserListReact",JSON.stringify(e))}},{key:"getUserListRole",value:function(e){return s.default.post("/reportServer/formUser/getUserListRole",JSON.stringify(e))}},{key:"getUserInfo",value:function(e){return s.default.post("/reportServer/formUser/getUserInfoByUserId",JSON.stringify({id:e}))}},{key:"saveUserInfo",value:function(e){return"null"==e._id?s.default.post("/reportServer/formUser/addUser",JSON.stringify(e)):s.default.post("/reportServer/formUser/updateUser",JSON.stringify(e))}},{key:"delUser",value:function(e){return s.default.post("/reportServer/formUser/deleteUser",e)}},{key:"getRoleList",value:function(){return s.default.post("/reportServer/rule/getRoleList",{})}},{key:"getRoleListByUserId",value:function(e){return s.default.post("reportServer/auth/getRoleListByUserId",JSON.stringify({userid:e}))}},{key:"UpdatePwd",value:function(e){return s.default.post("/reportServer/formUser/updatePwd",JSON.stringify(e))}}]),e}();t.default=u},597:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=m(r(426)),n=m(r(433)),l=m(r(34)),s=m(r(138)),u=m(r(436)),o=m(r(428)),i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();r(427),r(434),r(104),r(190),r(437),r(78);var f=m(r(1)),d=r(189),c=m(r(592)),p=m(r(438));function m(e){return e&&e.__esModule?e:{default:e}}var h=new(m(r(188)).default),y=new c.default,v=o.default.Search,b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={list:[],pageNum:1,perPage:10,listType:"list",searchKeyword:""},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.default.Component),i(t,[{key:"componentDidMount",value:function(){this.loadUserList()}},{key:"loadUserList",value:function(){var e=this,t={};t.pageNum=this.state.pageNum,t.perPage=this.state.perPage,"search"===this.state.listType&&(t.keyword=this.state.searchKeyword),y.getUserList(t).then(function(t){e.setState(t.data)},function(t){e.setState({list:[]})})}},{key:"onPageNumChange",value:function(e){var t=this;this.setState({pageNum:e},function(){t.loadUserList()})}},{key:"onValueChange",value:function(e){var t=e.target.name,r=e.target.value.trim();this.setState(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},t,r))}},{key:"onSearch",value:function(e){var t=this,r=""===e?"list":"search";this.setState({listType:r,pageNum:1,searchKeyword:e},function(){t.loadUserList()})}},{key:"deleteUser",value:function(e){var t=this;confirm("确认删除吗？")&&y.delUser(e).then(function(e){alert("删除成功"),t.loadUserList()},function(e){alert("删除失败")})}},{key:"showCurRowMessage",value:function(e){alert("key:"+e.userId+" name:"+e.userName+" description:"+e.description)}},{key:"render",value:function(){var e=this;this.state.list.map(function(e,t){e.key=t});var t=h.getStorage("userInfo"),r=this.state.list,o=[{title:"ID",dataIndex:"userId",key:"userId"},{title:"姓名",dataIndex:"userName",key:"userName",render:function(e,t,r){return f.default.createElement(d.Link,{to:"/user/UserView/"+t.id},e)}},{title:"描述",dataIndex:"description",key:"description",width:"200px"},{title:"角色",dataIndex:"isAdminText",key:"isAdminText"},{title:"入职时间",dataIndex:"creationDate",key:"creationDate"},{title:"操作",dataIndex:"操作",render:function(r,a){return f.default.createElement("span",null,"1"!=a.userId?f.default.createElement(d.Link,{to:"/user/userInfo/"+a.id},"编辑"):"",f.default.createElement(u.default,{type:"vertical"}),"1"==a.userId||a.id==t.id?"":f.default.createElement("a",{onClick:function(){return e.deleteUser(""+a.id)},href:"javascript:;"},"删除"))}}];return f.default.createElement("div",{id:"page-wrapper"},f.default.createElement(a.default,{title:"用户列表"},f.default.createElement(s.default,null,f.default.createElement(v,{style:{width:300,marginBottom:"10px"},placeholder:"请输入...",enterButton:"查询",onSearch:function(t){return e.onSearch(t)}})),f.default.createElement(s.default,null,f.default.createElement(l.default,{href:"#/user/userInfo/null",style:{float:"right",marginRight:"30px"},type:"primary"},"新建用户")),f.default.createElement(n.default,{dataSource:r,columns:o,pagination:!1}),f.default.createElement(p.default,{current:this.state.pageNum,total:this.state.total,onChange:function(t){return e.onPageNumChange(t)}})))}}]),t}();t.default=b},598:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=b(r(426)),n=b(r(34)),l=b(r(48)),s=b(r(33)),u=b(r(428)),o=b(r(588)),i=b(r(66)),f=b(r(431)),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();r(427),r(104),r(429),r(430),r(78),r(590),r(191),r(432);var p=b(r(1)),m=b(r(592)),h=(b(r(139)),b(r(573))),y=b(r(5)),v=b(r(439));function b(e){return e&&e.__esModule?e:{default:e}}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j=new(b(r(188)).default),w=f.default.Item,E=i.default.Option,k=new m.default,_=(o.default.RangePicker,function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={confirmDirty:!1,_id:r.props.match.params.userId,userName:"",isAdmin:"",regisType:"local",encryptPwd:"",startDate:"",endDate:"",description:"",userId:"",isw:!1,roleList:[],isAdminText:[]},r.handleSubmit=r.handleSubmit.bind(r),r.handleConfirmBlur=r.handleConfirmBlur.bind(r),r.compareToFirstPassword=r.compareToFirstPassword.bind(r),r.validateToNextPassword=r.validateToNextPassword.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.default.Component),c(t,[{key:"componentDidMount",value:function(){var e=this;"1"==this.state._id?window.location.href="#/user/userView/"+this.state._id:(k.getRoleListByUserId(this.state._id).then(function(t){for(var r=[],a=t.roleList,n=t.userroleList,l=0;l<a.length;l++)r.push(p.default.createElement(E,{key:a[l].roleId},a[l].roleName));e.setState({roleList:r,isAdminText:n},function(){this.props.form.setFieldsValue({isAdminText:this.state.isAdminText})})}),null!=this.state._id&&""!=this.state._id&&"null"!=this.state._id&&k.getUserInfo(this.state._id).then(function(t){e.setState(t.data.userInfo),e.props.form.setFieldsValue({userName:t.data.userInfo.userName,encryptPwd:t.data.userInfo.encryptPwd,startDate:(0,y.default)(t.data.userInfo.startDate,"YYYY-MM-DD"),endDate:(0,y.default)(t.data.userInfo.endDate,"YYYY-MM-DD"),description:t.data.userInfo.description,userId:t.data.userInfo.userId,confirm:""})},function(t){e.setState({}),j.errorTips(t)}))}},{key:"onValueChange",value:function(e){var t,r=e.target.name,a=e.target.value.trim();"encryptPwd"==r?this.setState((g(t={},r,a),g(t,"isw",!0),t)):this.setState(g({},r,a));this.props.form.setFieldsValue(g({},r,a))}},{key:"onSelectChange",value:function(e,t){if("isAdminText"==e){var r=t.join(",");this.setState(g({},e,r))}else this.setState(g({},e,t));this.props.form.setFieldsValue(g({},e,t))}},{key:"onValueChangeDate",value:function(e,t,r){this.setState(g({},e,r)),this.props.form.setFieldsValue(g({},e,r))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.form.validateFieldsAndScroll(function(e,r){e||k.saveUserInfo(t.state).then(function(e){null!=t.state._id&&""!=t.state._id&&"null"!=t.state._id?alert("修改成功"):alert("保存成功"),window.location.href="#user/userList"},function(e){t.setState({}),j.errorTips(e)})})}},{key:"handleConfirmBlur",value:function(e){var t=e.target.value;this.setState({confirmDirty:this.state.confirmDirty||!!t})}},{key:"compareToFirstPassword",value:function(e,t,r){var a=this.props.form;t&&t!==a.getFieldValue("encryptPwd")?r("两次输入密码不一致!"):r()}},{key:"validateToNextPassword",value:function(e,t,r){var a=this.props.form;t&&this.state.confirmDirty&&a.validateFields(["confirm"],{force:!0}),r()}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,r={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},c="0";return this.state.isw&&(c="12"),p.default.createElement("div",{id:"page-wrapper"},p.default.createElement(a.default,{title:"null"==this.state._id?"新建用户":"编辑用户"},p.default.createElement(f.default,{onSubmit:this.handleSubmit},p.default.createElement(l.default,null,p.default.createElement(s.default,{span:12},p.default.createElement(w,d({},r,{label:"用户名"}),t("userName",{rules:[{required:!0,message:"请输入用户名!"}]})(p.default.createElement(u.default,{type:"text",name:"userName",onChange:function(t){return e.onValueChange(t)}})))),p.default.createElement(s.default,{span:12},p.default.createElement(w,d({},r,{label:"用户编号"}),t("userId",{rules:[{required:!0,message:"请输入用户编号!",whitespace:!0}]})(p.default.createElement(u.default,{type:"text",name:"userId",onChange:function(t){return e.onValueChange(t)}}))))),p.default.createElement(l.default,null,p.default.createElement(s.default,{span:12},p.default.createElement(w,d({},r,{label:"密码",hideRequiredMark:"true"}),t("encryptPwd",{rules:[{required:!0,message:"请输入密码!"},{validator:this.validateToNextPassword}]})(p.default.createElement(u.default,{type:"password",name:"encryptPwd",onChange:function(t){return e.onValueChange(t)}})))),p.default.createElement(s.default,{span:c},p.default.createElement(w,d({},r,{label:"确认密码"}),t("confirm",{rules:[{required:!1,message:"请再次输入密码!"},{validator:this.compareToFirstPassword}]})(p.default.createElement(u.default,{type:"password",onBlur:function(){return e.handleConfirmBlur}}))))),p.default.createElement(l.default,null,p.default.createElement(s.default,{span:12},p.default.createElement(w,d({},r,{label:"用户归属"}),p.default.createElement(i.default,{name:"regisType",value:this.state.regisType.toString(),style:{width:120},onChange:function(t){return e.onSelectChange("regisType",t)}},p.default.createElement(E,{value:"erp"},"ERP用户"),p.default.createElement(E,{value:"local"},"本地用户")))),p.default.createElement(s.default,{span:12},p.default.createElement(w,d({},r,{label:"用户角色"}),t("isAdminText",{rules:[{required:!0,message:"请选择角色!"}]})(p.default.createElement(i.default,{mode:"multiple",style:{width:"120px"},placeholder:"请选择",name:"isAdminText",onChange:function(t){return e.onSelectChange("isAdminText",t)}},this.state.roleList))))),p.default.createElement(l.default,null,p.default.createElement(s.default,{span:12},p.default.createElement(w,d({},r,{label:"开始时间"}),t("startDate",{rules:[{required:!0,message:"请选择开始时间!"}]})(p.default.createElement(o.default,{name:"startDate",onChange:function(t,r){return e.onValueChangeDate("startDate",t,r)},locale:h.default,placeholder:"请选择开始时间"})))),p.default.createElement(s.default,{span:12},p.default.createElement(w,d({},r,{label:"失效时间"}),t("endDate",{rules:[{required:!0,message:"请选择失效时间!"}]})(p.default.createElement(o.default,{name:"endDate",onChange:function(t,r){return e.onValueChangeDate("endDate",t,r)},locale:h.default,placeholder:"请选择失效时间"}))))),p.default.createElement(l.default,null,p.default.createElement(s.default,{span:12},p.default.createElement(w,d({},r,{label:"备注"}),t("description",{rules:[{required:!0,message:"请输入备注!"}]})(p.default.createElement(v.default,{type:"text",name:"description",onChange:function(t){return e.onValueChange(t)}})))),p.default.createElement(s.default,{span:12}," ")),p.default.createElement(w,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},p.default.createElement(n.default,{type:"primary",htmlType:"submit"},"保存"),p.default.createElement(n.default,{href:"#/user/userList",type:"primary",style:{marginLeft:"30px"}},"返回")))))}}]),t}());t.default=f.default.create()(_)},599:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=p(r(426)),n=p(r(34)),l=p(r(48)),s=p(r(33)),u=p(r(428)),o=p(r(431)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},f=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();r(427),r(104),r(429),r(430),r(78),r(432);var d=p(r(1)),c=p(r(592));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=o.default.Item,y=new c.default,v=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={confirmDirty:!1,_id:r.props.match.params.userId,encryptPwd:"",oldPwd:""},r.handleSubmit=r.handleSubmit.bind(r),r.handleConfirmBlur=r.handleConfirmBlur.bind(r),r.compareToFirstPassword=r.compareToFirstPassword.bind(r),r.validateToNextPassword=r.validateToNextPassword.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),f(t,[{key:"componentDidMount",value:function(){}},{key:"onValueChange",value:function(e){var t=e.target.name,r=e.target.value.trim();this.setState(m({},t,r)),this.props.form.setFieldsValue(m({},t,r))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.form.validateFieldsAndScroll(function(e,r){e||(r._id=t.state._id,y.UpdatePwd(r).then(function(e){"success"==e?(alert("修改成功!"),window.location.href="#/"):"faile"==e?alert("修改失败，原密码不正确！"):alert("修改失败，请重新登录进行修改！")},function(e){t.setState({}),localStorge.errorTips(e)}))})}},{key:"handleConfirmBlur",value:function(e){var t=e.target.value;this.setState({confirmDirty:this.state.confirmDirty||!!t})}},{key:"compareToFirstPassword",value:function(e,t,r){var a=this.props.form;t&&t!==a.getFieldValue("encryptPwd")?r("两次输入密码不一致!"):r()}},{key:"validateToNextPassword",value:function(e,t,r){var a=this.props.form;t&&this.state.confirmDirty&&a.validateFields(["confirm"],{force:!0}),r()}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,r={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};return d.default.createElement("div",{id:"page-wrapper"},d.default.createElement(a.default,{title:"修改密码"},d.default.createElement(o.default,{onSubmit:this.handleSubmit},d.default.createElement(l.default,null,d.default.createElement(s.default,{span:12},d.default.createElement(h,i({},r,{label:"请输入原密码"}),t("oldPwd",{rules:[{required:!0,message:"请输入原密码!"}]})(d.default.createElement(u.default,{type:"password",name:"oldPwd"}))))),d.default.createElement(l.default,null,d.default.createElement(s.default,{span:12},d.default.createElement(h,i({},r,{label:"新密码",hideRequiredMark:"true"}),t("encryptPwd",{rules:[{required:!0,message:"请输入新密码!"},{validator:this.validateToNextPassword}]})(d.default.createElement(u.default,{type:"password",name:"encryptPwd",onChange:function(t){return e.onValueChange(t)}}))))),d.default.createElement(l.default,null,d.default.createElement(s.default,{span:12},d.default.createElement(h,i({},r,{label:"确认新密码"}),t("confirm",{rules:[{required:!0,message:"请再次输入新密码!"},{validator:this.compareToFirstPassword}]})(d.default.createElement(u.default,{type:"password",onBlur:function(){return e.handleConfirmBlur}}))))),d.default.createElement(h,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},d.default.createElement(n.default,{type:"primary",htmlType:"submit"},"保存"),d.default.createElement(n.default,{href:"#/",type:"primary",style:{marginLeft:"30px"}},"返回")))))}}]),t}();t.default=o.default.create()(v)},600:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=m(r(426)),n=m(r(34)),l=m(r(48)),s=m(r(33)),u=m(r(66)),o=m(r(431)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},f=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();r(427),r(104),r(429),r(430),r(191),r(432);var d=m(r(1)),c=m(r(592)),p=m(r(439));function m(e){return e&&e.__esModule?e:{default:e}}var h=new(m(r(188)).default),y=o.default.Item,v=u.default.Option,b=new c.default,g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={_id:r.props.match.params.userId,userName:"",isAdmin:"0",regisType:"local",encryptPwd:"",startDate:"",endDate:"",description:"",userId:""},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),f(t,[{key:"componentDidMount",value:function(){var e=this;b.getUserInfo(this.state._id).then(function(t){e.setState(t.data.userInfo)},function(t){e.setState({}),h.errorTips(t)})}},{key:"render",value:function(){this.props.form.getFieldDecorator;var e={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};return d.default.createElement("div",{id:"page-wrapper"},d.default.createElement(a.default,{title:"查看用户"},d.default.createElement(o.default,{onSubmit:this.handleSubmit},d.default.createElement(l.default,null,d.default.createElement(s.default,{span:12},d.default.createElement(y,i({},e,{label:"用户名"}),this.state.userName)),d.default.createElement(s.default,{span:12},d.default.createElement(y,i({},e,{label:"用户编号"}),this.state.userId))),d.default.createElement(l.default,null,d.default.createElement(s.default,{span:12},d.default.createElement(y,i({},e,{label:"用户归属"}),d.default.createElement(u.default,{name:"regisType",value:this.state.regisType.toString(),style:{width:120},disabled:!0},d.default.createElement(v,{value:"erp"},"ERP用户"),d.default.createElement(v,{value:"local"},"本地用户")))),d.default.createElement(s.default,{span:12},d.default.createElement(y,i({},e,{label:"用户角色"}),d.default.createElement(u.default,{name:"isAdmin",value:this.state.isAdmin.toString(),style:{width:120},disabled:!0},d.default.createElement(v,{value:"0"},"普通员工"),d.default.createElement(v,{value:"1"},"管理员"))))),d.default.createElement(l.default,null,d.default.createElement(s.default,{span:12},d.default.createElement(y,i({},e,{label:"开始时间"}),this.state.startDate)),d.default.createElement(s.default,{span:12},d.default.createElement(y,i({},e,{label:"失效时间"}),this.state.endDate))),d.default.createElement(l.default,null,d.default.createElement(s.default,{span:12},d.default.createElement(y,i({},e,{label:"备注"}),d.default.createElement(p.default,{type:"text",name:"description",value:this.state.description,disabled:!0}))),d.default.createElement(s.default,{span:12}," ")),d.default.createElement(y,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},d.default.createElement(n.default,{href:"#/user/userList",type:"primary"},"返回")))))}}]),t}();t.default=o.default.create()(g)}}]);
//# sourceMappingURL=3.js.map