(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{579:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=i(r(1)),o=r(189),l=i(r(608)),u=i(r(609));function i(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),n(t,[{key:"render",value:function(){return a.default.createElement(o.Switch,null,a.default.createElement(o.Route,{path:"/Transfer/TransferList",component:l.default}),a.default.createElement(o.Route,{path:"/Transfer/TransferInfo/:transfer_id",component:u.default}),a.default.createElement(o.Redirect,{exact:!0,from:"/Transfer",to:"/Transfer/TransferList"}))}}]),t}();t.default=f},591:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();r(435);var a,o=r(188);var l=new((a=o)&&a.__esModule?a:{default:a}).default,u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"get",value:function(){}}],[{key:"getBaseUrl",value:function(){return window.getServerUrl()}},{key:"post",value:function(t,r){if(null==l.getStorage("userInfo")&&"/reportServer/user/encodePwd"!=t&&"/reportServer/user/Reactlogin"!=t||""==l.getStorage("userInfo")&&"/reportServer/user/encodePwd"!=t&&"/reportServer/user/Reactlogin"!=t)return window.location.href="#login",new Promise(function(e,t){});var n=e.getBaseUrl()+t,a={method:"POST",headers:{"Access-Control-Allow-Origin":"*",credentials:JSON.stringify(l.getStorage("userInfo")||"")},body:r};return fetch(n,a).then(function(e){return e.json()}).catch(function(e){return e.json()})}}]),e}();t.default=u},595:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(591),l=(n=o)&&n.__esModule?n:{default:n};var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"getList",value:function(e){return l.default.post("transfer/sql/getAllTransfer",JSON.stringify(e))}},{key:"getTransferInfo",value:function(e){return l.default.post("transfer/sql/getTransferById",JSON.stringify({id:e}))}},{key:"save",value:function(e){return"null"==e.transfer_id?l.default.post("transfer/sql/createTransfer",JSON.stringify(e)):l.default.post("transfer/sql/updateTransfer",JSON.stringify(e))}},{key:"delTransfer",value:function(e){return l.default.post("transfer/sql/deleteTransfer",JSON.stringify({id:e}))}}]),e}();t.default=u},608:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(r(426)),a=h(r(433)),o=h(r(34)),l=h(r(138)),u=h(r(436)),i=h(r(428)),f=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();r(427),r(434),r(104),r(190),r(437),r(78);var s=h(r(1)),c=r(189),d=h(r(595)),p=h(r(438));function h(e){return e&&e.__esModule?e:{default:e}}new(h(r(188)).default);var m=new d.default,y=i.default.Search,v=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={list:[],pageNum:1,perPage:10,listType:"list",searchKeyword:"",dictionaryList:[],pageNumd:1,searchDictionary:"",paramValue:"",totald:0},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),f(t,[{key:"componentDidMount",value:function(){this.loadTransferList()}},{key:"loadTransferList",value:function(){var e=this,t={};t.pageNum=this.state.pageNum,t.perPage=this.state.perPage,"search"===this.state.listType&&(t.keyword=this.state.searchKeyword),m.getList(t).then(function(t){e.setState({list:t.data.resultRows,total:t.data.resultTotal})},function(t){e.setState({list:[]})})}},{key:"onPageNumChange",value:function(e){var t=this;this.setState({pageNum:e},function(){t.loadTransferList()})}},{key:"onValueChange",value:function(e){var t=e.target.name,r=e.target.value.trim();this.setState(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},t,r))}},{key:"onSearch",value:function(e){var t=this,r=""===e?"list":"search";this.setState({listType:r,pageNum:1,searchKeyword:e},function(){t.loadTransferList()})}},{key:"deleteTransfer",value:function(e){var t=this;confirm("确认删除吗？")&&m.delTransfer(e).then(function(e){alert("删除成功"),t.loadTransferList()},function(e){alert("删除失败")})}},{key:"render",value:function(){var e=this,t=(this.state.list,[{title:"脚本编号",dataIndex:"transfer_id",key:"transfer_id"},{title:"脚本名称",dataIndex:"transfer_name",key:"transfer_name",render:function(e,t,r){return s.default.createElement(c.Link,{to:"/Transfer/TransferInfo/"+t.transfer_id},e)}},{title:"操作",dataIndex:"操作",render:function(t,r){return s.default.createElement("span",null,s.default.createElement(c.Link,{to:"/Transfer/TransferInfo/"+r.transfer_id},"编辑"),s.default.createElement(u.default,{type:"vertical"}),s.default.createElement("a",{onClick:function(){return e.deleteTransfer(""+r.transfer_id)},href:"javascript:;"},"删除"))}}]);return s.default.createElement("div",{id:"page-wrapper"},s.default.createElement(n.default,{title:"脚本列表"},s.default.createElement(l.default,null,s.default.createElement(y,{style:{width:300,marginBottom:"10px"},placeholder:"请输入...",enterButton:"查询",onSearch:function(t){return e.onSearch(t)}})),s.default.createElement(l.default,null,s.default.createElement(o.default,{href:"#/Transfer/TransferInfo/null",style:{float:"right",marginRight:"30px"},type:"primary"},"新建脚本")),s.default.createElement(a.default,{dataSource:this.state.list,columns:t,pagination:!1}),s.default.createElement(p.default,{current:this.state.pageNum,total:this.state.total,showTotal:function(t){return"共 "+e.state.total+"条"},onChange:function(t){return e.onPageNumChange(t)}})))}}]),t}();t.default=v},609:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(r(426)),a=m(r(34)),o=m(r(48)),l=m(r(428)),u=m(r(33)),i=m(r(431)),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();r(427),r(104),r(429),r(78),r(430),r(432);var c=m(r(1)),d=m(r(188)),p=m(r(595)),h=(m(r(439)),m(r(565)));function m(e){return e&&e.__esModule?e:{default:e}}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(566),r(580),r(567),r(581);var v=new p.default,b=new d.default,g=i.default.Item,w={lineNumbers:!0,mode:{name:"text/xml"},extraKeys:{Ctrl:"autocomplete"},theme:"default"},_=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={confirmDirty:!1,transfer_id:r.props.match.params.transfer_id,visible:!1,selectTransferList:[]},r.handleSubmit=r.handleSubmit.bind(r),r.handleConfirmBlur=r.handleConfirmBlur.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),s(t,[{key:"componentDidMount",value:function(){var e=this;null!=this.state.transfer_id&&""!=this.state.transfer_id&&"null"!=this.state.transfer_id&&v.getTransferInfo(this.state.transfer_id).then(function(t){e.props.form.setFieldsValue(t.data),e.refs.editorsql.codeMirror.setValue(t.data.transfer_content);var r=e.refs.editorsql;r.codeMirror.setSize("100%","500px"),r.codeMirror.border="solid  1px"},function(t){e.setState({}),b.errorTips(t)})}},{key:"onValueChange",value:function(e){var t=e.target.name,r=e.target.value.trim();this.props.form.setFieldsValue(y({},t,r))}},{key:"onValueChangetwo",value:function(e){var t=e.target.name,r=e.target.value.trim();this.setState(y({},t,r))}},{key:"onSelectChange",value:function(e,t){this.setState(y({},e,t)),this.props.form.setFieldsValue(y({},e,t))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.form.validateFieldsAndScroll(function(e,r){e||(r.transfer_id=t.state.transfer_id,r.transfer_content=t.refs.editorsql.codeMirror.getValue(),v.save(r).then(function(e){alert("保存成功"),window.location.href="#/Transfer"},function(e){t.setState({}),b.errorTips(e)}))})}},{key:"handleConfirmBlur",value:function(e){var t=e.target.value;this.setState({confirmDirty:this.state.confirmDirty||!!t})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return c.default.createElement("div",{id:"page-wrapper",style:{height:"100%",width:"100%",border:"1px"}},c.default.createElement(n.default,{title:"null"==this.state.transfer_id?"新建脚本":"编辑脚本"},c.default.createElement(i.default,{onSubmit:this.handleSubmit},c.default.createElement(o.default,null,c.default.createElement(u.default,{span:2,style:{textAlign:"right"}},c.default.createElement(g,{label:"脚本名称"})),c.default.createElement(u.default,{span:12},c.default.createElement(g,f({},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},{label:""}),e("transfer_name",{rules:[{required:!0,message:"请输入脚本名称!"}]})(c.default.createElement(l.default,{type:"text",name:"transfer_name"}))))),c.default.createElement(o.default,null,c.default.createElement(u.default,{span:2,style:{textAlign:"right"}},c.default.createElement(g,{label:"脚本内容"})),c.default.createElement(u.default,{span:22},c.default.createElement(h.default,{ref:"editorsql",value:"",style:{height:"100%",width:"100%",border:"1px"},options:w}))),c.default.createElement(g,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},c.default.createElement(a.default,{type:"primary",htmlType:"submit",style:{marginLeft:"30px"}},"保存"),c.default.createElement(a.default,{href:"#/Transfer",type:"primary",style:{marginLeft:"30px"}},"返回")))))}}]),t}();t.default=i.default.create()(_)}}]);
//# sourceMappingURL=8.js.map