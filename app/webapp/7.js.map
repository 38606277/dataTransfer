{"version":3,"sources":["webpack:///./src/page/fndvar/routerFndvar.jsx","webpack:///./src/util/HttpService.jsx","webpack:///./src/service/FndvarService.jsx","webpack:///./src/page/fndvar/FndvarList.jsx","webpack:///./src/page/fndvar/FndvarInfo.jsx"],"names":["__webpack_require__","_reactRouterDom","RouterFndvar","React","Component","_react2","default","createElement","Switch","Route","path","component","FndvarList","FndvarInfo","Redirect","exact","from","to","_LogcalStorge","localStorge","LocalStorge","HttpService","window","getServerUrl","url","param","undefined","getStorage","location","href","Promise","resolve","reject","fullUrl","getBaseUrl","opts","method","headers","Access-Control-Allow-Origin","credentials","JSON","stringify","body","fetch","then","response","json","catch","error","_HttpService","FndvarService","listParam","post","Id","var_name","Param","action","id","_fndvar","Search","_input2","props","_classCallCheck","this","_this","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","call","state","list","pageNum","perPage","listType","searchKeyword","loadFndvarList","_this2","keyword","getList","setState","data","resultRows","total","resultTotal","errMsg","_this3","e","name","target","value","trim","_defineProperty","_this4","_this5","confirm","delFndvar","alert","_this6","columns","title","dataIndex","key","render","text","record","Link","_divider2","type","onClick","deleteFndvar","_card2","_tooltip2","style","width","marginBottom","placeholder","enterButton","onSearch","_button2","float","marginRight","_table2","dataSource","pagination","_pagination2","current","showTotal","onChange","onPageNumChange","FormItem","_form2","Item","options","lineNumbers","mode","extraKeys","Ctrl","theme","confirmDirty","match","params","handleSubmit","bind","handleConfirmBlur","getFndvarInfo","form","setFieldsValue","refs","editorsql","codeMirror","setValue","var_define","setSize","border","errorTips","preventDefault","validateFieldsAndScroll","err","values","getValue","save","getFieldDecorator","formItemLayout","labelCol","xs","span","sm","wrapperCol","onSubmit","_row2","_col2","_extends","label","rules","required","message","textAlign","_reactCodemirror2","ref","height","offset","htmlType","marginLeft","create"],"mappings":"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","file":"7.js","sourcesContent":["import React            from 'react';\r\nimport { HashRouter as Router, Switch, Redirect, Route, Link } from 'react-router-dom'\r\n// 页面\r\nimport FndvarList from './FndvarList.jsx';\r\nimport FndvarInfo from './FndvarInfo.jsx';\r\n\r\nclass RouterFndvar extends React.Component{\r\n    render(){\r\n        return (\r\n            <Switch>\r\n                 <Route path=\"/Fndvar/FndvarList\" component={FndvarList} />\r\n                 <Route path=\"/Fndvar/FndvarInfo/:action/:var_name\" component={FndvarInfo} />\r\n                 <Redirect exact from=\"/Fndvar\" to=\"/Fndvar/FndvarList\"/> \r\n            </Switch>\r\n        )\r\n    }\r\n}\r\nexport default RouterFndvar;","import 'whatwg-fetch';\r\nimport  LocalStorge  from './LogcalStorge.jsx';\r\nconst localStorge = new LocalStorge();\r\nexport default class HttpService {\r\n    \r\n    static getBaseUrl(){\r\n\r\n        var url=window.getServerUrl();//\"http://localhost:8080/\";\r\n        return url;\r\n    }\r\n    \r\n    //\r\n    static post(url,param){\r\n        if((undefined==localStorge.getStorage('userInfo') && url!='/reportServer/user/encodePwd' && url!='/reportServer/user/Reactlogin') || (''==localStorge.getStorage('userInfo')  && url!='/reportServer/user/encodePwd' && url!='/reportServer/user/Reactlogin')){\r\n            window.location.href='#login';\r\n            return  new Promise((resolve, reject) => {});\r\n        }else{\r\n            const fullUrl = HttpService.getBaseUrl() + url;\r\n            let opts = {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Access-Control-Allow-Origin': '*',\r\n                    credentials: JSON.stringify(localStorge.getStorage('userInfo') || '')\r\n                },\r\n                body: param\r\n            };\r\n\r\n            return fetch(fullUrl, opts).then((response) => {\r\n                    //console.log(response.json())\r\n                    return response.json();\r\n                }).catch((error)=>{\r\n                    return error.json();\r\n                });\r\n        }\r\n    }\r\n\r\n    get(){\r\n\r\n    }\r\n\r\n          \r\n    }\r\n","/*\r\n* @Author: Rosen\r\n* @Date:   2018-01-31 13:19:15\r\n* @Last Modified by:   Rosen\r\n* @Last Modified time: 2018-02-04 22:52:34\r\n*/\r\n\r\nimport   HttpService  from '../util/HttpService.jsx';\r\n\r\nclass FndvarService{\r\n    // 获取任务列表\r\n    getList(listParam){\r\n      \r\n        return HttpService.post('transfer/globalVar/getAllFndVar',JSON.stringify(listParam));\r\n    }\r\n    \r\n    // 获取任务详情\r\n    getFndvarInfo(Id){\r\n        return HttpService.post('transfer/globalVar/getFndVarByName',JSON.stringify({var_name:Id}));\r\n    }\r\n     // 保存\r\n    save(Param,action){\r\n        if(action=='Create'){\r\n            return HttpService.post('transfer/globalVar/createFndVar',JSON.stringify(Param));\r\n        }else{\r\n            return HttpService.post('transfer/globalVar/updateFndVar',JSON.stringify(Param));\r\n        }\r\n    }\r\n    //删除一个job\r\n    delFndvar(id){\r\n        return HttpService.post('transfer/globalVar/deleteFndVar',JSON.stringify({var_name:id}));\r\n    }\r\n    \r\n}\r\n\r\nexport default FndvarService;","import React        from 'react';\r\nimport { Link }             from 'react-router-dom';\r\nimport FndvarService                 from '../../service/FndvarService.jsx';\r\nimport Pagination           from 'antd/lib/pagination';\r\nimport {Table,Divider,Button,Card, Tooltip,Input,Modal}  from 'antd';\r\nimport  LocalStorge         from '../../util/LogcalStorge.jsx';\r\nconst localStorge = new LocalStorge();\r\nconst _fndvar = new FndvarService();\r\nconst Search = Input.Search;\r\n\r\nclass FndvarList extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            list            : [],\r\n            pageNum         : 1,\r\n            perPage        : 10,\r\n            listType        :'list',\r\n            searchKeyword:'',\r\n           \r\n        };\r\n    }\r\n    componentDidMount(){\r\n         this.loadFndvarList();\r\n    }\r\n    loadFndvarList(){\r\n        let listParam = {};\r\n        listParam.pageNum  = this.state.pageNum;\r\n        listParam.perPage  = this.state.perPage;\r\n        // 如果是搜索的话，需要传入搜索类型和搜索关键字\r\n        if(this.state.listType === 'search'){\r\n            listParam.keyword    = this.state.searchKeyword;\r\n        }\r\n        _fndvar.getList(listParam).then(response => {\r\n            this.setState({list:response.data.resultRows,total:response.data.resultTotal});\r\n        }, errMsg => {\r\n            this.setState({\r\n                list : []\r\n            });\r\n            // _mm.errorTips(errMsg);\r\n        });\r\n    }\r\n    // 页数发生变化的时候\r\n    onPageNumChange(pageNum){\r\n        this.setState({\r\n            pageNum : pageNum\r\n        }, () => {\r\n            this.loadFndvarList();\r\n        });\r\n    }\r\n    // 数据变化的时候\r\n    onValueChange(e){\r\n        let name    = e.target.name,\r\n            value   = e.target.value.trim();\r\n        this.setState({\r\n            [name] : value\r\n        });\r\n    }\r\n     // 搜索\r\n     onSearch(searchKeyword){\r\n        let listType = searchKeyword === '' ? 'list' : 'search';\r\n        this.setState({\r\n            listType:listType,\r\n            pageNum         : 1,\r\n            searchKeyword   : searchKeyword\r\n        }, () => {\r\n            this.loadFndvarList();\r\n        });\r\n    }\r\n    deleteFndvar(id){\r\n        if(confirm('确认删除吗？')){\r\n            _fndvar.delFndvar(id).then(response => {\r\n                alert(\"删除成功\");\r\n                this.loadFndvarList();\r\n            }, errMsg => {\r\n                alert(\"删除失败\");\r\n            });\r\n        }\r\n    }\r\n   \r\n    render(){\r\n        // this.state.list.map((item,index)=>{\r\n        //     item.key=index;\r\n        // })\r\n        const dataSource = this.state.list;\r\n        const columns = [{\r\n            title: '变量名称',\r\n            dataIndex: 'var_name',\r\n            key: 'var_name'\r\n          },{\r\n            title: '变量类型',\r\n            dataIndex: 'var_type',\r\n            key: 'var_type',\r\n            \r\n          },{\r\n            title: '操作',\r\n            dataIndex: '操作',\r\n            render: (text, record) => (\r\n                <span>\r\n                  <Link to={ `/Fndvar/FndvarInfo/Update/${record.var_name}` }>编辑</Link>\r\n                  <Divider type=\"vertical\" />\r\n                  <a onClick={()=>this.deleteFndvar(`${record.var_name}`)} href=\"javascript:;\">删除</a>\r\n                </span>\r\n              ),\r\n          }];\r\n         \r\n        return (\r\n            <div id=\"page-wrapper\">\r\n            <Card title=\"全局变量列表\">\r\n                <Tooltip>\r\n                     <Search\r\n                        style={{ width: 300,marginBottom:'10px' }}\r\n                        placeholder=\"请输入...\"\r\n                        enterButton=\"查询\"\r\n                        onSearch={value => this.onSearch(value)}\r\n                        />\r\n                </Tooltip>\r\n                <Tooltip>\r\n                    <Button href=\"#/Fndvar/FndvarInfo/Create/null\" style={{ float: \"right\", marginRight: \"30px\" }} type=\"primary\">新建变量</Button>\r\n                </Tooltip>\r\n                \r\n                <Table dataSource={this.state.list} columns={columns}  pagination={false}/>\r\n                <Pagination current={this.state.pageNum} \r\n                        total={this.state.total}  showTotal={total => `共 ${this.state.total}条`}\r\n                        onChange={(pageNum) => this.onPageNumChange(pageNum)}/> \r\n            </Card>\r\n            \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default FndvarList;","import React from 'react';\r\nimport { Form, Input, Select, Button, Card, Row, Col } from 'antd';\r\nimport LocalStorge from '../../util/LogcalStorge.jsx';\r\nimport FndvarService from '../../service/FndvarService.jsx';\r\nimport TextArea from 'antd/lib/input/TextArea';\r\nimport CodeMirror from 'react-codemirror';\r\nimport 'codemirror/lib/codemirror.css';\r\nimport 'codemirror/mode/sql/sql';\r\nimport 'codemirror/theme/ambiance.css';\r\nconst _fndvar = new FndvarService();\r\nconst localStorge = new LocalStorge();\r\nconst FormItem = Form.Item;\r\nconst options = {\r\n  lineNumbers: true,                //显示行号  \r\n  mode: { name: \"text/x-mysql\" },          //定义mode  \r\n  extraKeys: { \"Ctrl\": \"autocomplete\" },//自动提示配置  \r\n  theme: \"default\"\r\n};\r\n\r\nclass FndvarInfo extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      confirmDirty: false,\r\n      action: this.props.match.params.action,\r\n      var_name: this.props.match.params.var_name,\r\n    };\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleConfirmBlur = this.handleConfirmBlur.bind(this);\r\n  }\r\n\r\n  //初始化加载调用方法\r\n  componentDidMount() {\r\n       if(null!=this.state.action && 'Create'!=this.state.action){\r\n        _fndvar.getFndvarInfo(this.state.var_name).then(response => {\r\n                this.props.form.setFieldsValue(response.data);\r\n                this.refs.editorsql.codeMirror.setValue(response.data.var_define);\r\n                let editorsql = this.refs.editorsql;\r\n                editorsql.codeMirror.setSize('100%', '500px');\r\n                editorsql.codeMirror.border = \"solid  1px\";\r\n            }, errMsg => {\r\n                this.setState({});\r\n                localStorge.errorTips(errMsg);\r\n            });\r\n        }\r\n  }\r\n\r\n  //编辑字段对应值\r\n  onValueChange(e) {\r\n    let name = e.target.name,\r\n      value = e.target.value.trim();\r\n    //this.setState({[name]:value});  \r\n    this.props.form.setFieldsValue({ [name]: value });\r\n\r\n  }\r\n //编辑字段对应值\r\n onValueChangetwo(e) {\r\n    let name = e.target.name,\r\n    value = e.target.value.trim();\r\n    this.setState({[name]:value});\r\n  }\r\n  //编辑字段对应值\r\n  onSelectChange(name,value){\r\n    this.setState({[name]:value});  \r\n    this.props.form.setFieldsValue({[name]:value});\r\n  }\r\n  //提交\r\n  handleSubmit(e) {\r\n    e.preventDefault();\r\n    this.props.form.validateFieldsAndScroll((err, values) => {\r\n      if (!err) {\r\n        \r\n        //values.var_name = this.state.var_name;\r\n        values.var_define = this.refs.editorsql.codeMirror.getValue();\r\n        _fndvar.save(values,this.state.action).then(response => {\r\n          alert(\"保存成功\");\r\n          window.location.href = \"#/Fndvar\";\r\n        }, errMsg => {\r\n          this.setState({});\r\n          localStorge.errorTips(errMsg);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  handleConfirmBlur(e) {\r\n    const value = e.target.value;\r\n    this.setState({ confirmDirty: this.state.confirmDirty || !!value });\r\n  }\r\n\r\n  render() {\r\n    const { getFieldDecorator } = this.props.form;\r\n    const formItemLayout = {\r\n      labelCol: {\r\n        xs: { span: 24 },\r\n        sm: { span: 8 },\r\n      },\r\n      wrapperCol: {\r\n        xs: { span: 24 },\r\n        sm: { span: 16 },\r\n      },\r\n    };\r\n    const tailFormItemLayout = {\r\n      labelCol: {\r\n        xs: { span: 4 },\r\n        sm: { span: 4 },\r\n      },\r\n      wrapperCol: {\r\n        xs: {span: 20},\r\n        sm: {pan: 20},\r\n      },\r\n    };\r\n    const BtnFormItemLayout = {\r\n      wrapperCol: {\r\n        xs: {\r\n          span: 24,\r\n          offset: 0,\r\n        },\r\n        sm: {\r\n          span: 16,\r\n          offset: 8,\r\n        },\r\n      },\r\n    };\r\n    return (\r\n      <div id=\"page-wrapper\">\r\n        <Card title={this.state.action == 'Create' ? '新建脚本' : '编辑脚本'}>\r\n          <Form onSubmit={this.handleSubmit}>\r\n            <Row>\r\n              <Col span={12}>\r\n                <FormItem {...formItemLayout} label=\"变量名称\">\r\n                  {getFieldDecorator('var_name', {\r\n                    rules: [{ required: true, message: '请输入变量名称!' }],\r\n                  })(\r\n                    <Input type='text' name='var_name' />\r\n                  )}\r\n                </FormItem>\r\n              </Col>\r\n              <Col span={12}>\r\n                <FormItem {...formItemLayout} label=\"变量类型\">\r\n                  {getFieldDecorator('var_type', {\r\n                    rules: [{ required: true, message: '请输入变量类型!' }],\r\n                  })(\r\n                    <Input type='text' name='var_type' />\r\n                  )}\r\n                </FormItem>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col span={4} style={{textAlign:'right'}}>\r\n                <FormItem label='变量内容'>\r\n                </FormItem>\r\n              </Col>\r\n              <Col span={20}>\r\n                    <CodeMirror ref=\"editorsql\" value='' style={{ height: '600px', width: '450px', border: \"1px\" }} options={options} />\r\n              </Col>\r\n            </Row>\r\n            <FormItem {...BtnFormItemLayout}>\r\n              <Button type=\"primary\" htmlType=\"submit\" style={{ marginLeft: '30px' }}>保存</Button>\r\n              <Button href=\"#/Fndvar\" type=\"primary\" style={{ marginLeft: '30px' }}>返回</Button>\r\n            </FormItem>\r\n          </Form>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Form.create()(FndvarInfo);\r\n"],"sourceRoot":""}